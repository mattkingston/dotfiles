#!/bin/bash

[[ "$(uname -s)" == "Darwin" ]] \
  && trueSource="$(readlink $BASH_SOURCE)" \
  || trueSource="$(readlink -f $BASH_SOURCE)"

if [ -d "$trueSource" ]; then
    trueSource="$(cd "$trueSource"; pwd)"
elif [ -f "$trueSource" ]; then
    if [[ "$trueSource" == */* ]]; then
        trueSource="$(cd "${trueSource%/*}"; pwd)"
    else
        trueSource="$(pwd)"
    fi
fi

declare -a utils=(
   'os'
   'args'
   'fs'
   'io'
   'proxy'
   'strings'
   'system'
   'vcs'
)

for i in ${utils[@]}; do
    [ -f "${trueSource}/utils/utils_${i}" ] \
      && source "${trueSource}/utils/utils_${i}"
done